!function(e){var r={};function t(o){if(r[o])return r[o].exports;var l=r[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var l in e)t.d(o,l,function(r){return e[r]}.bind(null,l));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r){e.exports=function(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],r=0;r<256;r++)e[256+r]=e[r];function t(e){return e*e*e*(e*(6*e-15)+10)}function o(e,r,t){return r+e*(t-r)}function l(e,r,t,o){var l=15&e,i=l<8?r:t,n=l<4?t:12==l||14==l?r:o;return(0==(1&l)?i:-i)+(0==(2&l)?n:-n)}return{noise:function(r,i,n){var a=~~r,s=~~i,d=~~n,u=255&a,f=255&s,c=255&d,m=(r-=a)-1,p=(i-=s)-1,g=(n-=d)-1,y=t(r),v=t(i),R=t(n),C=e[u]+f,E=e[C]+c,x=e[C+1]+c,h=e[u+1]+f,b=e[h]+c,M=e[h+1]+c;return o(R,o(v,o(y,l(e[E],r,i,n),l(e[b],m,i,n)),o(y,l(e[x],r,p,n),l(e[M],m,p,n))),o(v,o(y,l(e[E+1],r,i,g),l(e[b+1],m,i,n-1)),o(y,l(e[x+1],r,p,g),l(e[M+1],m,p,g))))}}}},function(e,r,t){"use strict";t.r(r);var o=t(0),l=t.n(o);AFRAME.registerGeometry("terrain-plain",{schema:{middleRadius:{type:"number",default:100,min:10},unitSize:{type:"number",default:1,min:.1,max:1e3},far:{type:"number",default:4e3},landYinColor:{type:"color",default:"#528d04"},landYangColor:{type:"color",default:"#278d53"},seaYinColor:{type:"color"},seaYangColor:{type:"color"},log:{type:"boolean",default:!1}},init:function(e){const r=new l.a,t=100*Math.random(),o=Math.sqrt(3)/2,i=Math.round(e.middleRadius/e.unitSize),n=e.middleRadius/i,a=(i-1)*n+1e-4,s=(i+1)*n+1e-4,d=e.far>s?e.far:s,u=a/4,f=Math.ceil(1.16*i),c=new THREE.Color(e.landYinColor),m=new THREE.Color(e.landYangColor),p=new THREE.Color(e.seaYinColor),g=new THREE.Color(e.seaYangColor);let y=p.clone();y.lerp(g,.5),e.log&&console.log("terrain-plain","SIZE="+i,"SCAN_SIZE="+f,"UNIT_SIZE="+n,"middleRadius="+e.middleRadius,"FAR="+d);let v=new THREE.Geometry,R={};R[-f-1]={};let C=0;for(let l=-f;l<=f;++l){R[l]={};for(let i=-f;i<=f;++i){let f=l*o*n,c=(i-l/2)*n,m=Math.sqrt(f*f+c*c);if(m<=s){let o;if(m<=a){o=10;for(let l=25;l<=1500;l*=5)o+=r.noise((f+e.middleRadius)/l,(c+e.middleRadius)/l,t)*Math.min(l/2,150);if((o*=Math.min(a-m,u)/u)>0){let l=5;o+=r.noise((f+e.middleRadius)/l,(c+e.middleRadius)/l,t)*l/2}o<0&&(o=0)}else m<=e.middleRadius?o=0:(f*=d/m,c*=d/m,o=0);R[l][i]=C++,v.vertices.push(new THREE.Vector3(f,o,c))}}}R[f+1]={};let E=new THREE.Color(4210752);E.lerp(c,.75);const x=5*n,h=25*n,b=3*n,M=12*n;let S={};for(let o=-f;o<=f;++o){S[o]={};for(let l=-f;l<=f;++l){let i=v.vertices[R[o][l]];if(i)if(i.y>0){let n=(1.73205+r.noise((i.x+e.middleRadius)/x,(i.z+e.middleRadius)/x,t)+r.noise((i.x+e.middleRadius)/h,(i.z+e.middleRadius)/h,t))/3.4641,a=c.clone();S[o][l]=a.lerp(m,n)}else{if(Math.sqrt(i.x*i.x+i.z*i.z)>a)S[o][l]=y;else{let e=[];e[0]=v.vertices[R[o][l-1]],e[1]=v.vertices[R[o-1][l-1]],e[2]=v.vertices[R[o-1][l]],e[3]=v.vertices[R[o][l+1]],e[4]=v.vertices[R[o+1][l+1]],e[5]=v.vertices[R[o+1][l]];let n=0,a=0;for(let r=0;r<6;++r)e[r]&&(e[r].y>0?++n:++a);if(0===n){let e=(1.73205+r.noise((i.x+d)/b,(i.z+d)/b,t)+r.noise((i.x+d)/M,(i.z+d)/M,t))/3.4641,n=p.clone();S[o][l]=n.lerp(g,e)}else if(0===a)S[o][l]=E;else{let e=new THREE.Color(7430491);e.lerp(c,n/(n+a)),S[o][l]=e}}}}}for(let e=-f;e<=f;++e)for(let r=-f;r<=f;++r){let t=R[e][r];if(v.vertices[t]){let o=R[e][r-1],l=R[e-1][r-1],i=R[e-1][r];if(void 0!==o&&void 0!==l){let i=new THREE.Face3(t,o,l);i.vertexColors[0]=S[e][r],i.vertexColors[1]=S[e][r-1],i.vertexColors[2]=S[e-1][r-1],v.faces.push(i)}if(void 0!==l&&void 0!==i){let o=new THREE.Face3(t,l,i);o.vertexColors[0]=S[e][r],o.vertexColors[1]=S[e-1][r-1],o.vertexColors[2]=S[e-1][r],v.faces.push(o)}}}v.computeBoundingBox(),v.mergeVertices(),v.computeFaceNormals(),v.computeVertexNormals(),this.geometry=v}}),AFRAME.registerPrimitive("a-terrain-plain",{defaultComponents:{geometry:{primitive:"terrain-plain",middleRadius:100,unitSize:1,log:!1},material:{vertexColors:"vertex"}},mappings:{"middle-radius":"geometry.middleRadius","unit-size":"geometry.unitSize",far:"geometry.far",log:"geometry.log",shader:"material.shader","land-yin-color":"geometry.landYinColor","land-yang-color":"geometry.landYangColor","sea-yin-color":"geometry.seaYinColor","sea-yang-color":"geometry.seaYangColor",metalness:"material.metalness",roughness:"material.roughness",src:"material.src","flat-shading":"material.flatShading"}})}]);
//# sourceMappingURL=main.js.map