!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){AFRAME.registerGeometry("terrain-plain",{schema:{middleRadius:{type:"number",default:100,min:10},unitSize:{type:"number",default:1,min:.1,max:1e3},far:{type:"number",default:4e3},log:{type:"boolean",default:!1}},init:function(e){const t=Math.sqrt(3)/2,r=Math.round(e.middleRadius/e.unitSize),i=e.middleRadius/r,n=(r-1)*i+1e-4,a=(r+1)*i+1e-4,o=e.far>a?e.far:a,l=Math.ceil(1.16*r);e.log&&console.log("terrain-plain","SIZE="+r,"SCAN_SIZE="+l,"UNIT_SIZE="+i,"middleRadius="+e.middleRadius,"FAR="+o);let u=new THREE.Geometry,s={};s[-l-1]={};let d=0;for(let r=-l;r<=l;++r){s[r]={};for(let m=-l;m<=l;++m){let l=r*t*i,f=(m-r/2)*i,c=Math.sqrt(l*l+f*f);if(c<=a){let t;c<=n?(t=2*Math.sin(l/3)*Math.sin(f/4),Math.abs(t)>n-c&&(t=Math.sign(t)*(n-c))):c<=e.middleRadius?t=0:(l*=o/c,f*=o/c,t=0),s[r][m]=d++,u.vertices.push(new THREE.Vector3(l,t,f));let i=d-1,a=s[r][m-1],p=s[r-1][m-1],g=s[r-1][m];void 0!==a&&void 0!==p&&u.faces.push(new THREE.Face3(i,a,p)),void 0!==p&&void 0!==g&&u.faces.push(new THREE.Face3(i,p,g))}}}u.computeBoundingBox(),u.mergeVertices(),u.computeFaceNormals(),u.computeVertexNormals(),this.geometry=u}}),AFRAME.registerPrimitive("a-terrain-plain",{defaultComponents:{geometry:{primitive:"terrain-plain",unitSize:1,size:1,log:!1},material:{shader:"standard",side:"front"}},mappings:{"middle-radius":"geometry.middleRadius","unit-size":"geometry.unitSize",far:"geometry.far",log:"geometry.log",color:"material.color",metalness:"material.metalness",roughness:"material.roughness",src:"material.src","flat-shading":"material.flatShading"}})}]);
//# sourceMappingURL=main.js.map