!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=function(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;t<256;t++)e[256+t]=e[t];function r(e){return e*e*e*(e*(6*e-15)+10)}function o(e,t,r){return t+e*(r-t)}function i(e,t,r,o){var i=15&e,l=i<8?t:r,n=i<4?r:12==i||14==i?t:o;return(0==(1&i)?l:-l)+(0==(2&i)?n:-n)}return{noise:function(t,l,n){var a=~~t,s=~~l,u=~~n,d=255&a,f=255&s,c=255&u,m=(t-=a)-1,p=(l-=s)-1,v=(n-=u)-1,y=r(t),g=r(l),R=r(n),E=e[d]+f,h=e[E]+c,x=e[E+1]+c,b=e[d+1]+f,C=e[b]+c,M=e[b+1]+c;return o(R,o(g,o(y,i(e[h],t,l,n),i(e[C],m,l,n)),o(y,i(e[x],t,p,n),i(e[M],m,p,n))),o(g,o(y,i(e[h+1],t,l,v),i(e[C+1],m,l,n-1)),o(y,i(e[x+1],t,p,v),i(e[M+1],m,p,v))))}}}},function(e,t,r){"use strict";r.r(t);var o=r(0),i=r.n(o);AFRAME.registerGeometry("terrain-plain",{schema:{middleRadius:{type:"number",default:100,min:10},unitSize:{type:"number",default:1,min:.1,max:1e3},far:{type:"number",default:4e3},color:{type:"color"},seaColor:{type:"color"},log:{type:"boolean",default:!1}},init:function(e){const t=new i.a,r=100*Math.random(),o=Math.sqrt(3)/2,l=Math.round(e.middleRadius/e.unitSize),n=e.middleRadius/l,a=(l-1)*n+1e-4,s=(l+1)*n+1e-4,u=e.far>s?e.far:s,d=a/4,f=Math.ceil(1.16*l),c=new THREE.Color(e.color),m=new THREE.Color(e.seaColor);e.log&&console.log("terrain-plain","SIZE="+l,"SCAN_SIZE="+f,"UNIT_SIZE="+n,"middleRadius="+e.middleRadius,"FAR="+u);let p=new THREE.Geometry,v={};v[-f-1]={};let y=0;for(let i=-f;i<=f;++i){v[i]={};for(let l=-f;l<=f;++l){let f=i*o*n,c=(l-i/2)*n,m=Math.sqrt(f*f+c*c);if(m<=s){let o;if(m<=a){o=10;for(let i=25;i<=1500;i*=5)o+=t.noise((f+e.middleRadius)/i,(c+e.middleRadius)/i,r)*Math.min(i/2,150);if((o*=Math.min(a-m,d)/d)>0){let i=5;o+=t.noise((f+e.middleRadius)/i,(c+e.middleRadius)/i,r)*i/2}o<0&&(o=0)}else m<=e.middleRadius?o=0:(f*=u/m,c*=u/m,o=0);v[i][l]=y++,p.vertices.push(new THREE.Vector3(f,o,c))}}}v[f+1]={};let g=new THREE.Color(4210752);g.lerp(c,.75);let R={};for(let e=-f;e<=f;++e){R[e]={};for(let t=-f;t<=f;++t){let r=p.vertices[v[e][t]];if(r)if(r.y>0)R[e][t]=c;else{if(Math.sqrt(r.x*r.x+r.z*r.z)>a)R[e][t]=m;else{let r=[];r[0]=p.vertices[v[e][t-1]],r[1]=p.vertices[v[e-1][t-1]],r[2]=p.vertices[v[e-1][t]],r[3]=p.vertices[v[e][t+1]],r[4]=p.vertices[v[e+1][t+1]],r[5]=p.vertices[v[e+1][t]];let o=0,i=0;for(let e=0;e<6;++e)r[e]&&(r[e].y>0?++o:++i);if(0===o)R[e][t]=m;else if(0===i)R[e][t]=g;else{let r=new THREE.Color(7430491);r.lerp(c,o/(o+i)),R[e][t]=r}}}}}for(let e=-f;e<=f;++e)for(let t=-f;t<=f;++t){let r=v[e][t];if(p.vertices[r]){let o=v[e][t-1],i=v[e-1][t-1],l=v[e-1][t];if(void 0!==o&&void 0!==i){let l=new THREE.Face3(r,o,i);l.vertexColors[0]=R[e][t],l.vertexColors[1]=R[e][t-1],l.vertexColors[2]=R[e-1][t-1],p.faces.push(l)}if(void 0!==i&&void 0!==l){let o=new THREE.Face3(r,i,l);o.vertexColors[0]=R[e][t],o.vertexColors[1]=R[e-1][t-1],o.vertexColors[2]=R[e-1][t],p.faces.push(o)}}}p.computeBoundingBox(),p.mergeVertices(),p.computeFaceNormals(),p.computeVertexNormals(),this.geometry=p}}),AFRAME.registerPrimitive("a-terrain-plain",{defaultComponents:{geometry:{primitive:"terrain-plain",middleRadius:100,unitSize:1,log:!1},material:{vertexColors:"vertex"}},mappings:{"middle-radius":"geometry.middleRadius","unit-size":"geometry.unitSize",far:"geometry.far",log:"geometry.log",shader:"material.shader",color:"geometry.color","sea-color":"geometry.seaColor",metalness:"material.metalness",roughness:"material.roughness",src:"material.src","flat-shading":"material.flatShading"}})}]);
//# sourceMappingURL=main.js.map