!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=function(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;t<256;t++)e[256+t]=e[t];function r(e){return e*e*e*(e*(6*e-15)+10)}function o(e,t,r){return t+e*(r-t)}function i(e,t,r,o){var i=15&e,n=i<8?t:r,a=i<4?r:12==i||14==i?t:o;return(0==(1&i)?n:-n)+(0==(2&i)?a:-a)}return{noise:function(t,n,a){var l=~~t,u=~~n,s=~~a,d=255&l,c=255&u,m=255&s,f=(t-=l)-1,p=(n-=u)-1,y=(a-=s)-1,g=r(t),v=r(n),R=r(a),h=e[d]+c,b=e[h]+m,E=e[h+1]+m,S=e[d+1]+c,M=e[S]+m,x=e[S+1]+m;return o(R,o(v,o(g,i(e[b],t,n,a),i(e[M],f,n,a)),o(g,i(e[E],t,p,a),i(e[x],f,p,a))),o(v,o(g,i(e[b+1],t,n,y),i(e[M+1],f,n,a-1)),o(g,i(e[E+1],t,p,y),i(e[x+1],f,p,y))))}}}},function(e,t,r){"use strict";r.r(t);var o=r(0),i=r.n(o);AFRAME.registerGeometry("terrain-plain",{schema:{middleRadius:{type:"number",default:100,min:10},unitSize:{type:"number",default:1,min:.1,max:1e3},far:{type:"number",default:4e3},color:{type:"color"},seaColor:{type:"color"},log:{type:"boolean",default:!1}},init:function(e){const t=new i.a,r=100*Math.random(),o=Math.sqrt(3)/2,n=Math.round(e.middleRadius/e.unitSize),a=e.middleRadius/n,l=(n-1)*a+1e-4,u=(n+1)*a+1e-4,s=e.far>u?e.far:u,d=l/4,c=Math.ceil(1.16*n),m=new THREE.Color(e.color),f=new THREE.Color(e.seaColor);e.log&&console.log("terrain-plain","SIZE="+n,"SCAN_SIZE="+c,"UNIT_SIZE="+a,"middleRadius="+e.middleRadius,"FAR="+s);let p=new THREE.Geometry,y={};y[-c-1]={};let g=0;for(let i=-c;i<=c;++i){y[i]={};for(let n=-c;n<=c;++n){let c=i*o*a,v=(n-i/2)*a,R=Math.sqrt(c*c+v*v);if(R<=u){let o;if(R<=l){o=10;for(let i=25;i<=1500;i*=5)o+=t.noise((c+e.middleRadius)/i,(v+e.middleRadius)/i,r)*Math.min(i/2,150);if((o*=Math.min(l-R,d)/d)>0){let i=5;o+=t.noise((c+e.middleRadius)/i,(v+e.middleRadius)/i,r)*i/2}o<0&&(o=0)}else R<=e.middleRadius?o=0:(c*=s/R,v*=s/R,o=0);y[i][n]=g++,p.vertices.push(new THREE.Vector3(c,o,v));let a,u=g-1,h=y[i][n-1],b=p.vertices[h];void 0!==b&&(a=b.y?m:f);let E,S=y[i-1][n-1],M=p.vertices[S];void 0!==M&&(E=M.y?m:f);let x,T=y[i-1][n],w=p.vertices[T];if(void 0!==w&&(x=w.y?m:f),void 0!==h&&void 0!==S){let e=new THREE.Face3(u,h,S);o||b.y||M.y?e.color.set(m):e.color.set(f),p.faces.push(e)}if(void 0!==S&&void 0!==T){let e=new THREE.Face3(u,S,T);o||M.y||w.y?e.color.set(m):e.color.set(f),p.faces.push(e)}}}}p.computeBoundingBox(),p.mergeVertices(),p.computeFaceNormals(),p.computeVertexNormals(),this.geometry=p}}),AFRAME.registerPrimitive("a-terrain-plain",{defaultComponents:{geometry:{primitive:"terrain-plain",middleRadius:100,unitSize:1,log:!1},material:{vertexColors:"vertex"}},mappings:{"middle-radius":"geometry.middleRadius","unit-size":"geometry.unitSize",far:"geometry.far",log:"geometry.log",shader:"material.shader",color:"geometry.color","sea-color":"geometry.seaColor",metalness:"material.metalness",roughness:"material.roughness",src:"material.src","flat-shading":"material.flatShading"}})}]);
//# sourceMappingURL=main.js.map