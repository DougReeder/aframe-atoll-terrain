!function(e){var r={};function t(o){if(r[o])return r[o].exports;var i=r[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(o,i,function(r){return e[r]}.bind(null,i));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r){e.exports=function(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],r=0;r<256;r++)e[256+r]=e[r];function t(e){return e*e*e*(e*(6*e-15)+10)}function o(e,r,t){return r+e*(t-r)}function i(e,r,t,o){var i=15&e,l=i<8?r:t,n=i<4?t:12==i||14==i?r:o;return(0==(1&i)?l:-l)+(0==(2&i)?n:-n)}return{noise:function(r,l,n){var a=~~r,d=~~l,s=~~n,u=255&a,f=255&d,c=255&s,m=(r-=a)-1,p=(l-=d)-1,v=(n-=s)-1,g=t(r),y=t(l),R=t(n),C=e[u]+f,E=e[C]+c,x=e[C+1]+c,h=e[u+1]+f,b=e[h]+c,M=e[h+1]+c;return o(R,o(y,o(g,i(e[E],r,l,n),i(e[b],m,l,n)),o(g,i(e[x],r,p,n),i(e[M],m,p,n))),o(y,o(g,i(e[E+1],r,l,v),i(e[b+1],m,l,n-1)),o(g,i(e[x+1],r,p,v),i(e[M+1],m,p,v))))}}}},function(e,r,t){"use strict";t.r(r);var o=t(0),i=t.n(o);AFRAME.registerGeometry("terrain-plain",{schema:{middleRadius:{type:"number",default:100,min:10},unitSize:{type:"number",default:1,min:.1,max:1e3},far:{type:"number",default:4e3},landYinColor:{type:"color",default:"#528d04"},landYangColor:{type:"color",default:"#278d53"},seaColor:{type:"color"},log:{type:"boolean",default:!1}},init:function(e){const r=new i.a,t=100*Math.random(),o=Math.sqrt(3)/2,l=Math.round(e.middleRadius/e.unitSize),n=e.middleRadius/l,a=(l-1)*n+1e-4,d=(l+1)*n+1e-4,s=e.far>d?e.far:d,u=a/4,f=Math.ceil(1.16*l),c=new THREE.Color(e.landYinColor),m=new THREE.Color(e.landYangColor),p=new THREE.Color(e.seaColor);e.log&&console.log("terrain-plain","SIZE="+l,"SCAN_SIZE="+f,"UNIT_SIZE="+n,"middleRadius="+e.middleRadius,"FAR="+s);let v=new THREE.Geometry,g={};g[-f-1]={};let y=0;for(let i=-f;i<=f;++i){g[i]={};for(let l=-f;l<=f;++l){let f=i*o*n,c=(l-i/2)*n,m=Math.sqrt(f*f+c*c);if(m<=d){let o;if(m<=a){o=10;for(let i=25;i<=1500;i*=5)o+=r.noise((f+e.middleRadius)/i,(c+e.middleRadius)/i,t)*Math.min(i/2,150);if((o*=Math.min(a-m,u)/u)>0){let i=5;o+=r.noise((f+e.middleRadius)/i,(c+e.middleRadius)/i,t)*i/2}o<0&&(o=0)}else m<=e.middleRadius?o=0:(f*=s/m,c*=s/m,o=0);g[i][l]=y++,v.vertices.push(new THREE.Vector3(f,o,c))}}}g[f+1]={};let R=new THREE.Color(4210752);R.lerp(c,.75);const C=5*n,E=25*n;let x={};for(let o=-f;o<=f;++o){x[o]={};for(let i=-f;i<=f;++i){let l=v.vertices[g[o][i]];if(l)if(l.y>0){let n=(1.73205+r.noise((l.x+e.middleRadius)/C,(l.z+e.middleRadius)/C,t)+r.noise((l.x+e.middleRadius)/E,(l.z+e.middleRadius)/E,t))/3.4641,a=c.clone();x[o][i]=a.lerp(m,n)}else{if(Math.sqrt(l.x*l.x+l.z*l.z)>a)x[o][i]=p;else{let e=[];e[0]=v.vertices[g[o][i-1]],e[1]=v.vertices[g[o-1][i-1]],e[2]=v.vertices[g[o-1][i]],e[3]=v.vertices[g[o][i+1]],e[4]=v.vertices[g[o+1][i+1]],e[5]=v.vertices[g[o+1][i]];let r=0,t=0;for(let o=0;o<6;++o)e[o]&&(e[o].y>0?++r:++t);if(0===r)x[o][i]=p;else if(0===t)x[o][i]=R;else{let e=new THREE.Color(7430491);e.lerp(c,r/(r+t)),x[o][i]=e}}}}}for(let e=-f;e<=f;++e)for(let r=-f;r<=f;++r){let t=g[e][r];if(v.vertices[t]){let o=g[e][r-1],i=g[e-1][r-1],l=g[e-1][r];if(void 0!==o&&void 0!==i){let l=new THREE.Face3(t,o,i);l.vertexColors[0]=x[e][r],l.vertexColors[1]=x[e][r-1],l.vertexColors[2]=x[e-1][r-1],v.faces.push(l)}if(void 0!==i&&void 0!==l){let o=new THREE.Face3(t,i,l);o.vertexColors[0]=x[e][r],o.vertexColors[1]=x[e-1][r-1],o.vertexColors[2]=x[e-1][r],v.faces.push(o)}}}v.computeBoundingBox(),v.mergeVertices(),v.computeFaceNormals(),v.computeVertexNormals(),this.geometry=v}}),AFRAME.registerPrimitive("a-terrain-plain",{defaultComponents:{geometry:{primitive:"terrain-plain",middleRadius:100,unitSize:1,log:!1},material:{vertexColors:"vertex"}},mappings:{"middle-radius":"geometry.middleRadius","unit-size":"geometry.unitSize",far:"geometry.far",log:"geometry.log",shader:"material.shader","land-yin-color":"geometry.landYinColor","land-yang-color":"geometry.landYangColor","sea-color":"geometry.seaColor",metalness:"material.metalness",roughness:"material.roughness",src:"material.src","flat-shading":"material.flatShading"}})}]);
//# sourceMappingURL=main.js.map